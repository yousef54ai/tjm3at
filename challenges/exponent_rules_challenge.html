<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exponent Rules Speed Challenge - MATH001</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #002b36;
            color: #839496;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 3px solid #2aa198;
            margin-bottom: 30px;
        }

        h1 {
            color: #2aa198;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #93a1a1;
            font-size: 1.2em;
        }

        .timer-section {
            background-color: #073642;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
        }

        .timer-display {
            font-size: 4em;
            color: #2aa198;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
        }

        .timer-display.danger {
            color: #dc322f;
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        button {
            background-color: #2aa198;
            color: #002b36;
            border: none;
            padding: 20px 50px;
            border-radius: 8px;
            font-size: 1.5em;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 10px;
        }

        button:hover:not(:disabled) {
            opacity: 0.8;
            transform: scale(1.05);
        }

        button:disabled {
            background-color: #586e75;
            cursor: not-allowed;
            transform: none;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #073642;
            border-radius: 10px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .stat-item {
            text-align: center;
            min-width: 120px;
        }

        .stat-label {
            color: #586e75;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        .stat-value {
            color: #2aa198;
            font-size: 2em;
            font-weight: bold;
        }

        .quiz-container {
            display: none;
        }

        .quiz-container.active {
            display: block;
        }

        .question-card {
            background-color: #073642;
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 20px;
            border-left: 5px solid #6c71c4;
        }

        .question-number {
            background-color: #6c71c4;
            color: #002b36;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 20px;
        }

        .problem-text {
            font-size: 2.5em;
            color: #eee8d5;
            text-align: center;
            margin: 30px 0;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .problem-text sup {
            font-size: 0.6em;
            vertical-align: super;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .option-btn {
            background-color: #002b36;
            border: 3px solid #586e75;
            color: #eee8d5;
            padding: 20px;
            border-radius: 8px;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.2s;
            font-family: 'Courier New', monospace;
        }

        .option-btn:hover:not(.disabled) {
            border-color: #2aa198;
            background-color: #073642;
        }

        .option-btn.disabled {
            cursor: not-allowed;
        }

        .option-btn.correct {
            border-color: #859900;
            background-color: rgba(133, 153, 0, 0.2);
        }

        .option-btn.incorrect {
            border-color: #dc322f;
            background-color: rgba(220, 50, 47, 0.2);
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2em;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background-color: rgba(133, 153, 0, 0.15);
            border-left: 4px solid #859900;
            color: #859900;
        }

        .feedback.incorrect {
            background-color: rgba(220, 50, 47, 0.15);
            border-left: 4px solid #dc322f;
            color: #dc322f;
        }

        .results {
            display: none;
            text-align: center;
            padding: 40px;
            background-color: #073642;
            border-radius: 12px;
            border: 3px solid #2aa198;
        }

        .results.show {
            display: block;
        }

        .results h2 {
            color: #2aa198;
            font-size: 2.5em;
            margin-bottom: 20px;
        }

        .score-display {
            font-size: 4em;
            color: #2aa198;
            font-weight: bold;
            margin: 20px 0;
        }

        .score-display.perfect {
            color: #859900;
        }

        .score-display.good {
            color: #2aa198;
        }

        .score-display.needs-work {
            color: #cb4b16;
        }

        .time-taken {
            font-size: 1.5em;
            color: #93a1a1;
            margin-bottom: 20px;
        }

        .results-message {
            font-size: 1.3em;
            color: #93a1a1;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .problem-review {
            background-color: #002b36;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: left;
            max-height: 400px;
            overflow-y: auto;
        }

        .review-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .review-item.correct {
            background-color: rgba(133, 153, 0, 0.1);
            border-left: 3px solid #859900;
        }

        .review-item.incorrect {
            background-color: rgba(220, 50, 47, 0.1);
            border-left: 3px solid #dc322f;
        }

        .review-item sup {
            font-size: 0.7em;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #073642;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2aa198, #6c71c4);
            width: 0%;
            transition: width 0.3s ease;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .problem-text {
                font-size: 1.8em;
            }

            .option-btn {
                font-size: 1.2em;
                padding: 15px;
            }

            .options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚ö° Exponent Rules Challenge</h1>
            <p class="subtitle">Master All Exponent Rules - 20 Problems in 2 Minutes!</p>
        </header>

        <div class="timer-section">
            <div class="stat-label">TIME REMAINING</div>
            <div class="timer-display" id="timer">2:00</div>
            <button id="startButton" onclick="startQuiz()">üöÄ Start Challenge</button>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">Question</div>
                <div class="stat-value"><span id="currentQuestion">0</span>/20</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Correct</div>
                <div class="stat-value" id="correctCount">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Accuracy</div>
                <div class="stat-value"><span id="accuracy">0</span>%</div>
            </div>
        </div>

        <div class="quiz-container" id="quizContainer">
            <div class="question-card">
                <span class="question-number" id="questionNumber">Question 1</span>
                <div class="problem-text" id="problem"></div>
                <div class="options" id="options"></div>
                <div class="feedback" id="feedback"></div>
            </div>
        </div>

        <div class="results" id="results">
            <h2 id="resultsTitle">‚è±Ô∏è Time's Up!</h2>
            <div class="score-display" id="finalScore">0/20</div>
            <div class="time-taken" id="timeTaken"></div>
            <div class="results-message" id="resultsMessage"></div>

            <div class="problem-review" id="problemReview">
                <h3 style="color: #2aa198; margin-bottom: 15px;">üìä Problem Review</h3>
                <div id="reviewList"></div>
            </div>

            <button onclick="resetQuiz()">Try Again</button>
        </div>
    </div>

    <script>
        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let problems = [];
        let userAnswers = [];
        let timeRemaining = 120;
        let timerInterval;
        let quizStartTime;
        let quizActive = false;

        const bases = ['x', 'y', 'z', 'm', 'n', 'a', 'b'];

        function randomBase() {
            return bases[Math.floor(Math.random() * bases.length)];
        }

        function randomExponent(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function formatExponent(base, exp) {
            if (exp === 0) return '1';
            if (exp === 1) return base;
            return `${base}<sup>${exp}</sup>`;
        }

        function generateProductRule() {
            const base = randomBase();
            const exp1 = randomExponent(2, 8);
            const exp2 = randomExponent(2, 8);
            const answer = exp1 + exp2;

            const problem = `${formatExponent(base, exp1)} ¬∑ ${formatExponent(base, exp2)}`;
            const correctAnswer = formatExponent(base, answer);

            // Generate wrong answers
            const wrong1 = formatExponent(base, exp1 * exp2); // multiply instead of add
            const wrong2 = formatExponent(base, Math.abs(exp1 - exp2)); // subtract
            const wrong3 = formatExponent(base, answer + 1); // off by one

            return {
                problem,
                correctAnswer,
                wrongAnswers: [wrong1, wrong2, wrong3],
                type: 'Product Rule',
                explanation: `Product Rule: ${base}<sup>${exp1}</sup> ¬∑ ${base}<sup>${exp2}</sup> = ${base}<sup>${exp1}+${exp2}</sup> = ${base}<sup>${answer}</sup>`
            };
        }

        function generateQuotientRule() {
            const base = randomBase();
            const exp1 = randomExponent(5, 10);
            const exp2 = randomExponent(2, 4);
            const answer = exp1 - exp2;

            const problem = `${formatExponent(base, exp1)} / ${formatExponent(base, exp2)}`;
            const correctAnswer = formatExponent(base, answer);

            const wrong1 = formatExponent(base, exp1 + exp2); // add instead of subtract
            const wrong2 = formatExponent(base, exp1 * exp2); // multiply
            const wrong3 = formatExponent(base, answer - 1); // off by one

            return {
                problem,
                correctAnswer,
                wrongAnswers: [wrong1, wrong2, wrong3],
                type: 'Quotient Rule',
                explanation: `Quotient Rule: ${base}<sup>${exp1}</sup> / ${base}<sup>${exp2}</sup> = ${base}<sup>${exp1}-${exp2}</sup> = ${base}<sup>${answer}</sup>`
            };
        }

        function generatePowerRule() {
            const base = randomBase();
            const exp1 = randomExponent(2, 5);
            const exp2 = randomExponent(2, 4);
            const answer = exp1 * exp2;

            const problem = `(${formatExponent(base, exp1)})<sup>${exp2}</sup>`;
            const correctAnswer = formatExponent(base, answer);

            const wrong1 = formatExponent(base, exp1 + exp2); // add instead of multiply
            const wrong2 = formatExponent(base, Math.pow(exp1, exp2)); // raise to power
            const wrong3 = formatExponent(base, answer + 2); // off by some

            return {
                problem,
                correctAnswer,
                wrongAnswers: [wrong1, wrong2, wrong3],
                type: 'Power Rule',
                explanation: `Power Rule: (${base}<sup>${exp1}</sup>)<sup>${exp2}</sup> = ${base}<sup>${exp1}√ó${exp2}</sup> = ${base}<sup>${answer}</sup>`
            };
        }

        function generateNegativeExponent() {
            const base = randomBase();
            const exp = randomExponent(2, 5);

            const problem = `${formatExponent(base, -exp)}`;
            const correctAnswer = `1/${formatExponent(base, exp)}`;

            const wrong1 = `-${formatExponent(base, exp)}`; // negative number
            const wrong2 = `1/${formatExponent(base, -exp)}`; // keep negative
            const wrong3 = formatExponent(base, exp); // just remove negative

            return {
                problem,
                correctAnswer,
                wrongAnswers: [wrong1, wrong2, wrong3],
                type: 'Negative Exponent',
                explanation: `Negative Exponent: ${base}<sup>-${exp}</sup> = 1/${base}<sup>${exp}</sup>`
            };
        }

        function generateQuotientWithNegative() {
            const base = randomBase();
            const exp1 = randomExponent(3, 6);
            const exp2 = randomExponent(7, 10);
            const answer = exp1 - exp2; // will be negative

            const problem = `${formatExponent(base, exp1)} / ${formatExponent(base, exp2)}`;
            const correctAnswer = `1/${formatExponent(base, exp2 - exp1)}`;

            const wrong1 = formatExponent(base, answer); // leave as negative
            const wrong2 = formatExponent(base, exp2 - exp1); // wrong sign
            const wrong3 = `1/${formatExponent(base, exp1 - exp2 - 1)}`; // off by one

            return {
                problem,
                correctAnswer,
                wrongAnswers: [wrong1, wrong2, wrong3],
                type: 'Quotient with Negative Result',
                explanation: `${base}<sup>${exp1}</sup> / ${base}<sup>${exp2}</sup> = ${base}<sup>${exp1}-${exp2}</sup> = ${base}<sup>${answer}</sup> = 1/${base}<sup>${exp2-exp1}</sup>`
            };
        }

        function generateZeroExponent() {
            const base = randomBase();

            const problem = `${base}<sup>0</sup>`;
            const correctAnswer = '1';

            const wrong1 = '0';
            const wrong2 = base;
            const wrong3 = 'undefined';

            return {
                problem,
                correctAnswer,
                wrongAnswers: [wrong1, wrong2, wrong3],
                type: 'Zero Exponent',
                explanation: `Zero Exponent Rule: ${base}<sup>0</sup> = 1 (for any ${base} ‚â† 0)`
            };
        }

        function generateProblems() {
            problems = [];
            const problemTypes = [
                generateProductRule,
                generateQuotientRule,
                generatePowerRule,
                generateNegativeExponent,
                generateQuotientWithNegative,
                generateZeroExponent
            ];

            // Generate 20 problems with variety
            for (let i = 0; i < 20; i++) {
                let typeIndex;
                if (i < 3) {
                    // First 3: basic rules
                    typeIndex = i % 3;
                } else if (i < 18) {
                    // Next 15: random mix
                    typeIndex = Math.floor(Math.random() * problemTypes.length);
                } else {
                    // Last 2: challenging ones
                    typeIndex = 4 + (i - 18); // negative quotient and zero
                }

                const generator = problemTypes[typeIndex];
                const problemData = generator();

                // Shuffle options
                const allOptions = [
                    problemData.correctAnswer,
                    ...problemData.wrongAnswers
                ];

                // Fisher-Yates shuffle
                for (let j = allOptions.length - 1; j > 0; j--) {
                    const k = Math.floor(Math.random() * (j + 1));
                    [allOptions[j], allOptions[k]] = [allOptions[k], allOptions[j]];
                }

                problems.push({
                    problem: problemData.problem,
                    options: allOptions,
                    correctAnswer: problemData.correctAnswer,
                    type: problemData.type,
                    explanation: problemData.explanation
                });
            }
        }

        function startQuiz() {
            generateProblems();
            currentQuestionIndex = 0;
            correctAnswers = 0;
            userAnswers = [];
            timeRemaining = 120;
            quizActive = true;
            quizStartTime = Date.now();

            document.getElementById('startButton').disabled = true;
            document.getElementById('quizContainer').classList.add('active');
            document.getElementById('results').classList.remove('show');

            displayQuestion();
            startTimer();
            updateStats();
        }

        function startTimer() {
            const timerDisplay = document.getElementById('timer');

            timerInterval = setInterval(() => {
                timeRemaining--;

                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

                timerDisplay.classList.remove('danger');
                if (timeRemaining <= 10) {
                    timerDisplay.classList.add('danger');
                }

                if (timeRemaining <= 0) {
                    endQuiz(false);
                }
            }, 1000);
        }

        function displayQuestion() {
            const problem = problems[currentQuestionIndex];
            document.getElementById('questionNumber').textContent = `Question ${currentQuestionIndex + 1}`;
            document.getElementById('problem').innerHTML = problem.problem;

            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';

            problem.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerHTML = option;
                btn.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(btn);
            });

            document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect');
        }

        function selectAnswer(selectedIndex) {
            if (!quizActive) return;

            const problem = problems[currentQuestionIndex];
            const selectedAnswer = problem.options[selectedIndex];
            const isCorrect = selectedAnswer === problem.correctAnswer;

            // Disable all buttons
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                btn.classList.add('disabled');
                btn.onclick = null;
            });

            // Mark correct and incorrect
            buttons[selectedIndex].classList.add(isCorrect ? 'correct' : 'incorrect');

            // Always show correct answer
            if (!isCorrect) {
                buttons.forEach(btn => {
                    if (btn.innerHTML === problem.correctAnswer) {
                        btn.classList.add('correct');
                    }
                });
            }

            // Show feedback
            const feedback = document.getElementById('feedback');
            feedback.classList.add('show', isCorrect ? 'correct' : 'incorrect');
            feedback.innerHTML = isCorrect
                ? '‚úì Correct!<br><small>' + problem.explanation + '</small>'
                : '‚úó Incorrect<br><small>' + problem.explanation + '</small>';

            // Record answer
            userAnswers.push({
                problem: problem.problem,
                correct: problem.correctAnswer,
                userAnswer: selectedAnswer,
                isCorrect: isCorrect,
                type: problem.type
            });

            if (isCorrect) correctAnswers++;

            updateStats();

            // Auto-advance after 1.5 seconds
            setTimeout(() => {
                currentQuestionIndex++;

                if (currentQuestionIndex < problems.length) {
                    displayQuestion();
                } else {
                    endQuiz(true);
                }
            }, 1500);
        }

        function updateStats() {
            document.getElementById('currentQuestion').textContent = userAnswers.length;
            document.getElementById('correctCount').textContent = correctAnswers;

            const accuracy = userAnswers.length > 0
                ? Math.round((correctAnswers / userAnswers.length) * 100)
                : 0;
            document.getElementById('accuracy').textContent = accuracy;

            const progress = (userAnswers.length / problems.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function endQuiz(completed) {
            quizActive = false;
            clearInterval(timerInterval);

            const elapsedTime = Math.floor((Date.now() - quizStartTime) / 1000);
            const minutes = Math.floor(elapsedTime / 60);
            const seconds = elapsedTime % 60;

            document.getElementById('quizContainer').classList.remove('active');

            const resultsTitle = document.getElementById('resultsTitle');
            if (completed) {
                resultsTitle.textContent = 'üéâ Challenge Complete!';
            } else {
                resultsTitle.textContent = '‚è±Ô∏è Time\'s Up!';
            }

            const attemptedQuestions = userAnswers.length;
            document.getElementById('finalScore').textContent = `${correctAnswers}/${attemptedQuestions}`;
            document.getElementById('timeTaken').textContent =
                `Time: ${minutes}:${seconds.toString().padStart(2, '0')}`;

            const accuracy = attemptedQuestions > 0
                ? Math.round((correctAnswers / attemptedQuestions) * 100)
                : 0;

            const scoreDisplay = document.getElementById('finalScore');
            scoreDisplay.classList.remove('perfect', 'good', 'needs-work');

            let message = '';
            if (accuracy === 100 && completed) {
                scoreDisplay.classList.add('perfect');
                message = 'üåü PERFECT! You\'ve mastered all exponent rules!';
            } else if (accuracy >= 85) {
                scoreDisplay.classList.add('good');
                message = 'üî• Excellent! You have a strong grasp of exponent rules!';
            } else if (accuracy >= 70) {
                scoreDisplay.classList.add('good');
                message = 'üëè Good job! Review the problems you missed to improve.';
            } else if (accuracy >= 50) {
                scoreDisplay.classList.add('needs-work');
                message = 'üí™ Keep practicing! Focus on understanding each rule.';
            } else {
                scoreDisplay.classList.add('needs-work');
                message = 'üìö Review Chapter 4 carefully. Practice each rule step by step.';
            }

            document.getElementById('resultsMessage').textContent = message;

            displayReview();

            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        function displayReview() {
            const reviewList = document.getElementById('reviewList');
            reviewList.innerHTML = '';

            userAnswers.forEach((item, index) => {
                const reviewItem = document.createElement('div');
                reviewItem.className = `review-item ${item.isCorrect ? 'correct' : 'incorrect'}`;

                const status = item.isCorrect ? '‚úì' : '‚úó';
                const color = item.isCorrect ? '#859900' : '#dc322f';

                reviewItem.innerHTML = `
                    <strong style="color: ${color}">${status} Question ${index + 1}</strong>
                    <span style="color: #6c71c4">[${item.type}]</span><br>
                    ${item.problem} = ${item.correct}
                    ${!item.isCorrect ? `<br><span style="color: #dc322f">Your answer: ${item.userAnswer}</span>` : ''}
                `;

                reviewList.appendChild(reviewItem);
            });
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            correctAnswers = 0;
            userAnswers = [];
            timeRemaining = 120;
            quizActive = false;

            clearInterval(timerInterval);

            document.getElementById('timer').textContent = '2:00';
            document.getElementById('timer').classList.remove('danger');
            document.getElementById('startButton').disabled = false;
            document.getElementById('quizContainer').classList.remove('active');
            document.getElementById('results').classList.remove('show');
            document.getElementById('progressBar').style.width = '0%';

            updateStats();

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        window.onload = function() {
            updateStats();
        };
    </script>
</body>
</html>
